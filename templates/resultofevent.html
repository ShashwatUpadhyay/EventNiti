{% extends "index.html" %}
{% block title %}Event Result{% endblock title %}
{% block content %}

<div class="bg-gray-100 min-h-screen pt-[80px] font-sans">

  <!-- Header -->
  <section class="relative bg-gradient-to-r from-purple-700 to-indigo-800 py-20 text-center text-white overflow-hidden shadow-lg">
    <div class="absolute top-0 left-0 w-full h-full opacity-10 z-0">
      <div class="absolute top-10 left-10 w-32 h-32 bg-yellow-400 rounded-full animate-ping"></div>
      <div class="absolute bottom-10 right-20 w-48 h-48 bg-blue-400 rounded-full animate-pulse"></div>
    </div>
    <div class="relative z-10">
      <h1 class="text-5xl font-extrabold drop-shadow-lg">🏆 Event Result</h1>
      <p class="mt-2 text-indigo-100 text-lg">Event: <span class="text-yellow-300">{{ event.title }}</span> | <span>{{ event.start_date|date:'F d, Y' }}</span></p>
    </div>
  </section>

  <!-- Winner Section -->
  <section class="max-w-7xl mx-auto py-16 px-6 animate-fade-in">
    {% if result %}
    <div class="bg-white rounded-3xl shadow-2xl p-12 text-center">
      <h2 class="text-4xl font-bold text-purple-700 mb-10">🎉 Meet the Winners</h2>
      <div class="grid md:grid-cols-3 gap-10">
        <!-- 1st -->
        <div class="flex flex-col items-center">
          <img src="{{ result.first_img.url }}" class="w-36 h-36 rounded-full border-4 border-yellow-500 shadow-lg" />
          <h3 class="text-xl font-bold text-gray-800 mt-4">{{ result.first.get_full_name }}</h3>
          <span class="text-yellow-500 font-semibold mt-1">🥇 Winner</span>
        </div>
        <!-- 2nd -->
        <div class="flex flex-col items-center">
          <img src="{{ result.second_img.url }}" class="w-36 h-36 rounded-full border-4 border-gray-400 shadow-lg" />
          <h3 class="text-xl font-bold text-gray-800 mt-4">{{ result.second.get_full_name }}</h3>
          <span class="text-gray-600 font-semibold mt-1">🥈 Runner Up</span>
        </div>
        <!-- 3rd -->
        <div class="flex flex-col items-center">
          <img src="{{ result.third_img.url }}" class="w-36 h-36 rounded-full border-4 border-orange-400 shadow-lg" />
          <h3 class="text-xl font-bold text-gray-800 mt-4">{{ result.third.get_full_name }}</h3>
          <span class="text-orange-500 font-semibold mt-1">🥉 2nd Runner Up</span>
        </div>
      </div>
    </div>
    {% else %}
    <div class="text-center text-yellow-700 bg-yellow-100 border border-yellow-300 p-8 rounded-xl mt-10 shadow-md">
      <p class="text-xl font-semibold">📢 Results haven't been announced yet!</p>
    </div>
    {% endif %}
  </section>

  <!-- Participants Table -->
  {% if result and submisson %}
  <section class="max-w-6xl mx-auto py-12 px-6">
    <h2 class="text-3xl font-bold text-center text-purple-700 mb-8">👥 All Participants</h2>
    <div class="overflow-x-auto shadow-md rounded-2xl">
      <table class="w-full table-auto border-collapse bg-white text-left">
        <thead class="bg-purple-600 text-white">
          <tr>
            <th class="px-6 py-3">Full Name</th>
            <th class="px-6 py-3">Course</th>
            <th class="px-6 py-3">Section</th>
            <th class="px-6 py-3">Year</th>
          </tr>
        </thead>
        <tbody class="text-gray-700">
          {% for student in submisson %}
          <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 border-t">{{ student.full_name }}</td>
            <td class="px-6 py-4 border-t">{{ student.course }}</td>
            <td class="px-6 py-4 border-t">{{ student.section }}</td>
            <td class="px-6 py-4 border-t">{{ student.year }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
  {% endif %}

  <!-- Blogs Section -->
  {% if event.blogs.all %}
  <section class="bg-gray-50 py-16">
    <h2 class="text-3xl font-bold text-center text-purple-700 mb-12">📝 Blogs by Participants</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 px-6 max-w-7xl mx-auto">
      {% for blog in event.blogs.all %}
      <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all hover:scale-105">
        <img src="{{ blog.image.url }}" alt="{{ blog.title }}" class="w-full h-48 object-cover" />
        <div class="p-6">
          <h3 class="text-xl font-semibold text-gray-800 mb-2">{{ blog.title }}</h3>
          <p class="text-gray-500 mb-4">{{ blog.content|striptags|truncatewords:10|safe }}</p>
          <a href="{% url 'blogpage' blog.slug %}" class="text-indigo-600 font-semibold hover:underline">Read More →</a>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>
  {% endif %}

</div>

<style>
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .animate-fade-in {
    animation: fadeIn 0.8s ease-out both;
  }
</style>
{% endblock content %}
