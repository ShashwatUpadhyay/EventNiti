{% extends "index.html" %}

{% block title %}
Prerogative Pointers
{% endblock title %}

{% block content %}
{% load static %}

<!-- Hero Section -->

<br>
<br>
<section class="bg-center bg-no-repeat bg-cover bg-[url('{{rand_mem}}')] bg-gray-700 bg-blend-multiply h-screen">
    <div class="px-4 mx-auto max-w-screen-xl text-center py-24 lg:py-56">
        <h1 class="mb-4 text-4xl font-extrabold tracking-tight leading-none text-purple-500 md:text-5xl lg:text-6xl">Welcome to Prerogative Pointers <br> United University</h1>
        <p class="mb-8 text-lg font-normal text-gray-300 lg:text-xl sm:px-16 lg:px-48">Your journey to unforgettable experiences starts here.

        </p>
        <div class="flex flex-col space-y-4 sm:flex-row sm:justify-center sm:space-y-0">
            <a href="{% url 'ourTeam' %}" class="inline-flex justify-center items-center py-3 px-5 text-base font-medium text-center text-white rounded-lg bg-purple-500 hover:bg-white hover:text-purple-500 focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-900">
                Our Team
                <svg class="w-3.5 h-3.5 ms-2 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/>
                </svg>
            </a>
            <a href="#events" class="inline-flex justify-center hover:text-gray-900 items-center py-3 px-5 sm:ms-4 text-base font-medium text-center text-white rounded-lg border border-purple-500 hover:bg-gray-100 focus:ring-4 focus:ring-gray-400">
                Join Events
            </a>  
        </div>
    </div>
</section>


<!-- Events Section -->
<main id='events' class="container mx-auto px-6 py-16 z-0">
    <h2 class="text-4xl text-center font-extrabold text-purple-500">Upcoming Events</h2> 
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
        {% if event %}
        {% for events in event %}
            <div class="bg-white border border-gray-200 shadow-lg rounded-lg overflow-hidden hover:shadow-xl hover:scale-105 transform transition duration-300">
    
                <!-- Event Poster -->
                {% if events.poster %}
                <img src="{{ events.poster.url }}" alt="Event Poster" class="w-full h-48 object-cover">
                {% else %}
                <div class="w-full h-48 bg-gray-200 flex items-center justify-center text-gray-500">
                    No Poster Available
                </div>
                {% endif %}
        
                <!-- Event Details -->
                <div class="p-6">
                    <h2 class="text-xl font-bold text-blue-600">{{ events.title }}</h2>
                    <p class="text-gray-600 mt-2">üìÖ Date: <span class="font-medium text-gray-900">{{ events.start_date|date:"F d, Y"|default:"To be Announced..." }}</span></p>
                    <p class="text-gray-600">üìç Location: <span class="font-medium text-gray-900">{{ events.location }}</span></p>
                    
                    <!-- Registration Status Badge -->
                    <div class="mt-4">
                        {% if events.event_over %}
                        <span class="inline-block bg-gray-500 text-white font-semibold py-1 px-3 rounded-full text-sm">
                            Event Over
                        </span>
                        {% else %}
                            {% if events.registration_open %}
                                <span class="inline-block bg-green-500 text-white font-semibold py-1 px-3 rounded-full text-sm">
                                    Registration Open ‚úÖ
                                </span>
                            {% else %}
                                <span class="inline-block bg-red-500 text-white font-semibold py-1 px-3 rounded-full text-sm">
                                    Registration Closed ‚ùå
                                </span>
                            {% endif %}
                        {% endif %}
                    </div>

                    <!-- View Details Button -->
                    <div class="text-right mt-4">
                        {% if user.is_authenticated %}
                        {% if not user.is_student %}
                            <a href="{% url 'teacherEvent' events.slug %}" class="inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-blue-700">
                                View Details
                            </a>
                        {% else %}
                        <a href="{% url 'event' events.slug %}" class="inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-blue-700">
                            View Details
                        </a>
                        {% endif %}
                        
                        {% else %}
                        <a href="{% url 'event' events.slug %}" class="inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-blue-700">
                            View Details
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}    
        {% else %}
            <div class="col-span-full">
                <div class="flex flex-col items-center justify-center bg-yellow-100 border border-yellow-300 text-yellow-700 font-semibold rounded-lg py-6 px-8 mt-6">
                    <p>No Ongoing Events</p>
                </div>
            </div>
        {% endif %} 
    </div>
    {% if user.is_authenticated %}
        {% if not user.is_student %}
            <a href="{% url "teacherEventList" %}" class="text-blue-600 mt-4 inline-block">See more ‚û°Ô∏è</a>
        {% else %}
            <a href="{% url "events" %}" class="text-blue-600 mt-4 inline-block">See more ‚û°Ô∏è</a>
        {% endif %}
    {% else %}
        <a href="{% url "events" %}" class="text-blue-600 mt-4 inline-block">See more ‚û°Ô∏è</a>
    {% endif %}
</main>
<section class="container mx-auto px-6 py-16">
    <h1 class="text-4xl text-center font-extrabold text-purple-500 mb-8">Our Past Successful Events</h1>
    <div class="relative">
        <!-- Slider Container -->
        <div id="slider-container" class="past-events__container flex overflow-x-auto scroll-smooth">
            <div id="slider" class="past-events__slider flex space-x-4">
                {% for event in events %}
                <a href='{% url "eventResult" event.slug %}'>
                <div class="past-events__card bg-white rounded-lg shadow-lg overflow-hidden w-64 flex-shrink-0" height='200px'>
                    <div class="past-events__image">
                        <img src="{{event.poster.url}}" alt="Event Image" class="w-full h-48 object-cover">
                    </div>
                    <div class="past-events__details p-4">
                        <h3 class="past-events__event-title text-2xl font-semibold text-gray-800 mb-2">{{ event.title}}</h3>
                        <p class="past-events__date text-sm text-gray-500 mb-2">{{ event.start_date|date:"F d, Y"}}</p>
                        {% comment %} <p class="past-events__description text-sm text-gray-600">{{event.description}}</p> {% endcomment %}
                    </div>
                </div>
            </a>
                {% endfor %}
            </div>
        </div>

        <!-- Left and Right Navigation Buttons -->
        <button id="prev-btn" class="bg-purple-500 absolute left-0 top-1/2 transform -translate-y-1/2 bg-blue-600 text-white p-2 rounded-full focus:outline-none">
            &#60;
        </button>
        <button id="next-btn" class="bg-purple-500 absolute right-0 top-1/2 transform -translate-y-1/2 bg-blue-600 text-white p-2 rounded-full focus:outline-none">
            &#62;
        </button>
    </div>
</section>



<script>
    const sliderContainer = document.getElementById('slider-container');
    const slider = document.getElementById('slider');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    // Scroll amount (adjust as needed)
    const scrollAmount = 300;

    // Scroll left on previous button click
    prevBtn.addEventListener('click', () => {
        sliderContainer.scrollBy({
            left: -scrollAmount,
            behavior: 'smooth'
        });
    });

    // Scroll right on next button click
    nextBtn.addEventListener('click', () => {
        sliderContainer.scrollBy({
            left: scrollAmount,
            behavior: 'smooth'
        });
    });
</script>
<!-- Memories Section -->
<section id="memories" class="py-16 bg-gray-50 z-0">
    <div class="max-w-7xl mx-auto px-6 text-center">
        <h2 class="text-4xl font-extrabold text-purple-500">Memories</h2>
        <p class="mt-2 text-gray-600">Relive the moments that matter most to you.</p>
        <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

            {% for mems in mem %}
                <a href=" {% url 'event_memories_list' mems.event.slug %} " class="hover:scale-105 transition duration-300">
                <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-2xl">
                    <img src="{{ mems.memory_img.latest.image.url }}" alt="Memory" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-bold text-lg text-gray-800">{{mems.memory_title}}</h3>
                        <p class="text-gray-500 mt-1">{{ mems.event.title }} Event</p>
                        <p class="text-gray-500">{{ mems.event.start_date|date:"F d, Y" }}</p>
                    </div>
                </div>
                </a>
            {% endfor %}
        </div>
        <a href="{% url "memories" %}" class="text-blue-600 mt-4 inline-block">See more ‚û°Ô∏è</a>
    </div>
</section>



<!-- Contact Section -->
<section id="contact" class="py-16 bg-gradient-to-r from-blue-600 to-purple-500 text-black">
    <div class="bg-white shadow-xl rounded-lg p-8 max-w-2xl mx-auto lg:w-2/3 backdrop-blur-md bg-opacity-80">
        <h2 class="text-3xl font-bold text-gray-800 text-center">üì© Get in Touch</h2>
        <p class="text-gray-600 text-center mt-2 mb-6">Fill out the form below, and we'll get back to you soon.</p>
        
        <form action="#" method="POST" class="space-y-6">
            {% csrf_token %}
            
            <!-- Name Input -->
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700">Your Name</label>
                <input type="text" id="name" name="name" class="w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                    placeholder="Enter your full name" required>
            </div>

            <!-- Email Input -->
            <div>
                <label for="email" class="block text-sm font-medium text-gray-700">Your Email</label>
                <input type="email" id="email" name="email" class="w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                    placeholder="Enter your email address" required>
            </div>

            <!-- Subject Input -->
            <div>
                <label for="subject" class="block text-sm font-medium text-gray-700">Subject</label>
                <input type="text" id="subject" name="subject" class="w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                    placeholder="Enter the subject" required>
            </div>

            <!-- Message Input -->
            <div>
                <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                <textarea id="message" name="message" rows="5" class="w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                    placeholder="Type your message here" required></textarea>
            </div>

            <!-- Submit Button -->
            <div class="text-center">
                <button type="submit" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:scale-105 transform transition duration-300 hover:bg-blue-700 focus:ring-2 focus:ring-blue-400">
                    üöÄ Send Message
                </button>
            </div>
        </form>
    </div>
</section>
{% if messages %}
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            {% for message in messages %}
                Swal.fire({
                    position: "top-end",
                    icon: "{% if message.tags == 'error' %}error{% elif message.tags == 'success' %}success{% elif message.tags == 'warning' %}warning{% else %}info{% endif %}",
                    title: "{{ message }}",
                    showConfirmButton: false,
                    timer: 1500
                  });
                  
            {% endfor %}
        });
    </script>
{% endif %}
{% endblock content %}
